/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /gh/FThompson/FormPersistence.js@2.0.1/form-persistence.js
 * 
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
const FormPersistence=(()=>{function e(e){let n={};for(let t of e.elements){let e=t.tagName,s=t.type;if("INPUT"!==e||"password"!==s&&"file"!==s)if(t.name in n||(n[t.name]=[]),"INPUT"===e){let e=t.type;"radio"===e?t.checked&&n[t.name].push(t.value):"checkbox"===e?n[t.name].push(t.checked):n[t.name].push(t.value)}else if("TEXTAREA"===e)n[t.name].push(t.value);else if("SELECT"===e)if(t.multiple)for(let e of t.options)e.selected&&n[t.name].push(e.value);else n[t.name].push(t.value)}return n}function n(n,t={}){let s=Object.assign({},{uuid:null,useSessionStorage:!1},t),i=e(n);(s.useSessionStorage?sessionStorage:localStorage).setItem(u(n,s.uuid),JSON.stringify(i))}function t(e,n,t={}){let s=Object.assign({},{valueFunctions:null},t),i=[];null!==s.valueFunctions&&(i=function(e,n,t){let s=[];for(let i in t)if(i in e){for(let s of e[i])t[i](n,s);s.push(i)}return s}(n,e,s.valueFunctions));for(let t in n)if(!i.includes(t)){[...e.elements].filter(e=>e.name===t).forEach((e,s)=>{o(e,n[t],s)})}}function s(e,n={}){let s=Object.assign({},{uuid:null,useSessionStorage:!1,valueFunctions:null},n),i=(s.useSessionStorage?sessionStorage:localStorage).getItem(u(e,s.uuid));if(i){t(e,JSON.parse(i),n)}}function i(e,n={}){let t=Object.assign({},{uuid:null,useSessionStorage:!1},n);(t.useSessionStorage?sessionStorage:localStorage).removeItem(u(e,t.uuid))}function o(e,n,t){let s=e.tagName;if("INPUT"===s){let s=e.type;"radio"===s?e.checked=e.value===n[0]:"checkbox"===s?e.checked=n[0]:e.value=n[t]}else if("TEXTAREA"===s)e.value=n[t];else if("SELECT"===s)if(e.multiple)for(let t of e.options)t.selected=n.includes(t.value);else e.value=n[t]}function u(e,n){if(!n&&!e.id)throw Error("form persistence requires a form id or uuid");return"form#"+(n||e.id)}return{persist:function(e,t={}){let o=Object.assign({},{uuid:null,useSessionStorage:!1,saveOnSubmit:!1,valueFunctions:null},t);s(e,o);let u=()=>n(e,o),l=()=>{window.removeEventListener("unload",u),u()};window.addEventListener("beforeunload",l),window.addEventListener("unload",u),o.saveOnSubmit||e.addEventListener("submit",()=>{window.removeEventListener("beforeunload",l),window.removeEventListener("unload",u),i(e,o)})},load:s,save:n,clearStorage:i,serialize:e,deserialize:t}})();!function(){if("undefined"!=typeof module&&module.exports)module.exports=exports=FormPersistence;else{(this||window).FormPersistence=FormPersistence}}();
//# sourceMappingURL=/sm/2ac483cf4ff30b61449370caab14f36b49a35f7f1699cc7ee5d1a9e4ba61ab31.map